# liquid_vapor_database

Общий План Работы:
Изучение основ OpenCV:

Изучите базовые функции OpenCV, такие как чтение изображений, преобразование в оттенки серого, применение пороговой обработки и обнаружение контуров.
Эти знания помогут вам в предварительной обработке изображений и выделении таблиц и графиков.
Реализация Предварительной Обработки:

Протестируйте различные методы предобработки на нескольких образцах изображений.
Определите наилучшие параметры для пороговой обработки и обнаружения контуров, которые позволят вам точно выделить таблицы и графики.
Извлечение Текста и Данных:

Изучите интеграцию OpenCV с OCR (например, с Tesseract) для извлечения текста из изображений.
Проведите эксперименты с распознаванием текста на ваших изображениях, чтобы получить чёткие результаты.
Обработка Данных и Экспорт в CSV:

Используйте библиотеку pandas для организации извлеченных данных в удобный для анализа формат.
Создайте скрипт для сохранения данных в CSV файл.
Автоматизация и Масштабирование:

После тестирования на первых 5-10 страницах, автоматизируйте процесс для обработки всей книги.
Убедитесь, что ваш код устойчив к возможным вариациям в изображениях и может корректно обрабатывать различные страницы.
Рекомендации для Самостоятельного Изучения:
Документация OpenCV: Начните с официальной документации OpenCV. Она хорошо структурирована и содержит множество полезных примеров.
Онлайн-курсы и руководства: Существует множество онлайн-ресурсов, где вы можете найти подробные уроки и примеры кода для OpenCV.
Практика на реальных данных: Применяйте изученные методы непосредственно к вашим изображениям, чтобы лучше понять, как они работают в реальных условиях.


"Проведи детальный анализ каждого изображения, сосредоточившись на области анализа,\
            содержащей таблицы или графики. Для каждой области анализа обрати внимание на следующие элементы:\
                1. Номер области анализа в левой части. \
                    2. Имена химических соединений или элементов в центре, разделены дефисом,\
                        и их химические формулы строкой ниже.\
                            3. Номер источника в квадратных скобках у правого края.\
                                4. Данные таблицы.\
                                    5. Графики, если они присутствуют.\
                                        Пришли ответ в виде csv файла с табличными данными. Если в области анализа\
                                            был график, то выдай табличные данные с 10 строками по котоырм можно воспроизвести этот график"


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


В файл extracted_text.txt добавляются таблицы после OCR обработки моего документа. Иногда символы читаются некорректно и я хочу подсказать шаблон для gpt как он мог бы обработать мой текст после обработки исправив погрешности.

Помоги мне составить правильный промт после того как я ниже опишу большинство случаев с которыми придется столкнуться.

В текстовом файле укзывается страница, которая подверглась обработке. Например:
--- Страница 130 ---
Все что ниже  этой строки и выше строки с именем:
--- Страница 131 ---
Разберем страницу 130. Вот что ты можешь наблюдать:
--- Страница 130 ---
№2 ВОДОРОД—ДЕЙТЕРИЙ [1031]
H,—D,
|
х | y t Р V1 \2
0.0 0.0 Нет данных 760 — 1.000
10.0 22.4 1.074 1.001

Страница начинается с новой таблицы. Первым всегда идет номер таблицы, после название химических соединений, которым посвящена таблица и дальше на той же строке номер источника. Ниже всегда OCR попытается вписать химическую формулу соединений. В данном случае H2 - D2. Химическую формулу практически всегда придется переписывать заново. Ниже находятся различные символы и вертикальные палки. Вертикальные палки это всегда части стенок таблицы, от них нужно избавляться. Символами являются столбцы таблицы. Всегда в таблице присутствуют символы - "x", "y".  Причем x всегда идет перед y. Как правило это первые столбцы таблицы. Их значения в таблице меняются от 0 до 100. Дальше может быть температура "t" или давление ("P" или "P, ата"). Очень редко в таблице присутствуют коэффициенты Y1, Y2 (большая греческая гамма) если есть Y1 то всегда присутствует и Y2. Их значения как правило лежат в диапазоне от 0 до 2. В данной таблице они определились как "V1 \2" 

Теперь по содержанию таблицы. Обрати внимание что в первой строке больше значений чем во второй. Так происходит потому что в первой строке указывается что для столбца температура "Нет данных" а столбец давление P полностью состоит из значений 760. Пропуски в строках явно указываются дефисом как например здесь:
0.0 0.0 Нет данных 760 — 1.000
в следующей строке для коэффициента Y1 уже есть значение:
10.0 22.4 1.074 1.001

Подытожим. Я хочу чтобы текст после обработки выглядел так:
--- Страница 130 ---
№2 ВОДОРОД—ДЕЙТЕРИЙ H2—D2

то есть таблица подписывалась без указания номера источника, а вместо него химическая формула в строке с метаданными о таблице.

Для этой таблицы первые 2 строки должны выглядеть так:
0.0 0.0 Нет данных 760 — 1.000
10.0 22.4 Нет данных 760 1.074 1.001

Разберем следующую таблицу на этой странице:
№ 3 ВОДОРОД—АЗОТ [1052]
Н.—№
x | y | Г | Р, ата | x | y | t | P, ata
0 0 —240 12.15 21.9 92.2, —205 147.39
2.0 98.7 12.17 22.0 90.8 147.39
2.5 98.4 12.21 25.2 90.3 176.34
2.7 98.0 47.11 29.6 87.0 209.24
4.1 98.1 26.74 30.7 88.1 223.06
51 98.4 36.32 34.1 85.4 225.04
1.5 98.2 46.32 0 0 —195 1.10
8.3 98.4 55.53 2.3 90.5 17.17
8.5 97.4 55.67 7.3 93.0 49.14
12.0 96.3 89.83 11.9 93.7 55.67
14.3 94.8 118.44 17.5 92.2 79.78
14.7 95.7 118.44 24.8 89.5 113.83
15.2 — 118.44 33.4 84.0 147.39
17.2 95.7 147.39 37.9 81.3 161.87
19.4 — 176.34 43.0 15.9 176.34
19.5 93.3 176.34 47.9 70.0 185.56
21.0 91.5 205.30 54.9 61.7 190.82
21.6 93.5 205.30 0 0 —185 2.39
22.1 — 245.17 2.4 77.0 17.11
22.2 92.9 245.17 5.3 83.3 26.71
0 0 —205 0.29 9.2 85.3 41.19
3.3 97.3 47.17 — 86.2 55.93
4.6 97.6 25.58 20.7 86.6 80.01
6.6 97.6 36.12 28.3 82.1 104.23
7.6 97.9 45.80 34.5 78.3 118.44
9.4 97.3 55.93 38.7 74.5 128.31
15.4 95.5 89.49 42.0 71.2 132.26
14.7 95.3 89.75 47.0 50.8 137.52
18.1 94.4 118.44

Обрати внимание на то что столбцы в таблице повторяются это происходит из-за того что в исходном источнике иногда таблица для экономии места занимает половину страницы и продолжение таблицы находится на той же странице но справа с повторением имен столбцов. В таком случае таблицы необходимо соединить в одну. В данных ты моешь наблюдать что в столбце температура "t" значения обновляются каждые несколько строк. Это означает что пропуски в строках ниже для данной таблице нужно заполнять новым значением.


